### **調整さんCSV to ICS コンバーター - 2025年7月25日 最小機能セット開発計画**

**1. 目標の最小化と優先順位付け**

本プロジェクトの現在の目標は、最小限の機能セットを確実に動作させることに注力することです。これにより、複雑な問題に一度に対処するのではなく、段階的に開発を進めます。

**2. 対象機能とエンコーディング**

*   **対象エンコーディング:** UTF-8 のみ。
    *   Shift-JIS 関連のテストおよび機能は、現在の文字化け問題と日付解析の複雑さを考慮し、**ファーザースタディ（今後の検討課題）**とします。
*   **対象オプション:**
    *   `-CsvPath` (必須): 入力CSVファイルのパスを指定。
    *   `-IcsPath` (必須): 出力ICSファイルのパスを指定。
    *   `-CsvEncoding` (必須): 入力CSVファイルのエンコーディングを指定（ただし、現在は UTF-8 のみ対応）。
    *   `-Debug` (デバッグ用): 処理の詳細なデバッグログをコンソールに出力。
    *   `-IgnoreOthers` および `-ExcludeNG` オプションは、現在のフェーズでは対象外とし、**ファーザースタディ**とします。

**3. テストの優先順位**

以下のテストケースの合格を優先します。

1.  `Normal_UTF8_NoOptions`: UTF-8 エンコーディングでの基本的な変換が正しく行われること。（**現在合格済み**）
2.  `EmptyCsv`: 空のCSVファイルが正しく処理され、期待される警告メッセージが生成・キャプチャされること。
3.  `ErrorFormatCsv`: 不正なフォーマットのCSVファイルが正しく処理され、期待される警告メッセージが生成・キャプチャされること。

**4. 既知の制限事項**

*   **ターミナル出力の文字化け:** WSL 2 (Ubuntu 24.04) から `pwsh.exe` を呼び出した際の標準出力 (stdout) および標準エラー出力 (stderr) の日本語文字化けは、現在の環境では解決が困難と判断し、**無視して開発を進めます**。スクリプトの機能には影響しないと見なします。

**5. 開発ステップ**

1.  **方針検討:** (完了)
2.  **ドキュメント修正:**
    *   `README.md`: 簡素化された機能セットに合わせて更新。
    *   `docs/csv_specification.md`: UTF-8 のみ対応であることを明確化。
    *   `docs/environment.md`: 変更なし。
    *   `reflection.md`: 変更なし。
3.  **テスト計画:**
    *   `test-chouseisan-converter.ps1` を修正し、上記で選択したオプションとテストケースのみを実行するようにする。
    *   特に `EmptyCsv` と `ErrorFormatCsv` の警告メッセージが正しくキャプチャされるように、`Run-Test` 関数を修正する。
4.  **単体テストと技術要素の確認:**
    *   `test.ps1` を使用して、`Run-Test` 関数における警告メッセージのキャプチャが正しく機能するかを個別に検証する。
5.  **最終的な組み上げ:**
    *   すべての単体テストが合格したら、主要スクリプト (`src/Convert-ChouseisanToIcs.ps1`) とテストスクリプト (`test-chouseisan-converter.ps1`) を最終的に組み上げて、全体が意図通りに動作することを確認する。
